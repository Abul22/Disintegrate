<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="An example of how Disintegrate's contain effect.">
  <meta name="author" content="Zach Saucier">

  <title>Contain effect demo - Disintegrate</title>

  <!-- Base demo styles -->
  <link rel="stylesheet" href="disintegrate-demo-styles.css">

  <!-- Custom styles for this template -->
  <style type="text/css">
    .CSS-animation {
      animation: bounceOutDown 3s infinite;
    }
    @keyframes bounceOutDown {
      50% {
        opacity: 1; transform: translate3d(0, 0, 0);
      }

      60% {
        transform: translate3d(0, -20px, 0);
      }

      70% {
        opacity: 1;
      }

      to {
        opacity: 0;
        transform: translate3d(0, 2000px, 0);
      }
    }

    .second-animation {
      animation-duration: 4.6s;
      animation-name: bounceOutRight;
    }
    @keyframes bounceOutRight {
      50% {
        opacity: 1; transform: translate3d(0, 0, 0);
      }
      60% {
        opacity: 1;
        transform: translate3d(-20px, 0, 0);
      }

      to {
        opacity: 0;
        transform: translate3d(2000px, 0, 0);
      }
    }
  </style>
</head>

<body>

<div class="middle-container title-section">
  <h1>
    <a href="https://github.com/ZachSaucier/Disintegrate/" title="Find this project on GitHub">
      Disintegrate 
      <svg class="github" viewBox="0 0 33 33">
        <title>GitHub</title>
        <path d="M16.608.455C7.614.455.32 7.748.32 16.745c0 7.197 4.667 13.302 11.14 15.456.815.15 1.112-.353 1.112-.785 0-.386-.014-1.411-.022-2.77-4.531.984-5.487-2.184-5.487-2.184-.741-1.882-1.809-2.383-1.809-2.383-1.479-1.01.112-.99.112-.99 1.635.115 2.495 1.679 2.495 1.679 1.453 2.489 3.813 1.77 4.741 1.353.148-1.052.569-1.77 1.034-2.177-3.617-.411-7.42-1.809-7.42-8.051 0-1.778.635-3.233 1.677-4.371-.168-.412-.727-2.069.16-4.311 0 0 1.367-.438 4.479 1.67a15.602 15.602 0 0 1 4.078-.549 15.62 15.62 0 0 1 4.078.549c3.11-2.108 4.475-1.67 4.475-1.67.889 2.242.33 3.899.163 4.311C26.37 12.66 27 14.115 27 15.893c0 6.258-3.809 7.635-7.437 8.038.584.503 1.105 1.497 1.105 3.017 0 2.177-.02 3.934-.02 4.468 0 .436.294.943 1.12.784 6.468-2.159 11.131-8.26 11.131-15.455 0-8.997-7.294-16.29-16.291-16.29"></path>
      </svg>
    </a>
  </h1>

  <p><i>"to reduce to particles, fragments, or parts; break up or destroy the cohesion of"</i></p>
</div>

<div class="middle-container">
  <h2>Contained demo - <a href="https://zachsaucier.github.io/Disintegrate/disintegrate-contain.html"><i>view source</i></a></h2>
  <p><i>Contained</i> Disintegrated elements create particles when leaving their container. If a contained element specifies a particular container by using <code>data-dis-container-id="example"</code>, that will be used. Otherwise Disintegrate will look in the element's ancestors for the nearest <code>data-dis-container</code>. If none is found, then the element's immediate <code>parentNode</code> will be used.</p>

  <p>This example makes use of Disintegrate's built in contain effects paired with normal CSS animations.</p>
</div>

<div data-dis-container class="middle-container section-container">
    <button data-dis-type="contained" class="CSS-animation">I'm ran by a CSS animation!</button>
    <button data-dis-type="contained" class="CSS-animation second-animation">I'm ran by a CSS animation!</button>
</div>

<div class="middle-container">
  <h2>Relevant code:</h2>

  <pre data-lang='hmtl' class='prettyprint'>
&lt;div data-dis-container class="middle-container section-container"&gt;
    &lt;button data-dis-type="contained" class="CSS-animation"&gt;
      I'm ran by a CSS animation!
    &lt;/button&gt;
    &lt;button data-dis-type="contained" class="CSS-animation second-animation"&gt;
      I'm ran by a CSS animation!
    &lt;/button&gt;
&lt;/div&gt;</pre>

  <pre data-lang='css' class='prettyprint'>
.CSS-animation {
  animation: bounceOutDown 3s infinite;
}
@keyframes bounceOutDown {
  50% {
    opacity: 1; transform: translate3d(0, 0, 0);
  }

  60% {
    transform: translate3d(0, -20px, 0);
  }

  70% {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(0, 2000px, 0);
  }
}

.second-animation {
  animation-duration: 4.6s;
  animation-name: bounceOutRight;
}
@keyframes bounceOutRight {
  50% {
    opacity: 1; transform: translate3d(0, 0, 0);
  }
  60% {
    opacity: 1;
    transform: translate3d(-20px, 0, 0);
  }

  to {
    opacity: 0;
    transform: translate3d(2000px, 0, 0);
  }
}</pre>
</div>

<div class="middle-container">
  <p><h2 class="view-more"><a href="https://zachsaucier.github.io/Disintegrate/">View more demos</a></h2></p>
</div>

<script type="text/javascript" src="html2canvas.min.js"></script>
<script type="text/javascript" src="disintegrate.js"></script>

<script type="text/javascript">
/* A simple drag effect demo */
var objMoving;
if(document.querySelector(".draggable")) {
  window.addEventListener("load", addListeners);

  function addListeners() {
    dises.forEach(function(disObj) {
      if(disObj.elem.classList.contains("draggable")) {
        disObj.elem.addEventListener('mousedown', function(e) { 
          objMoving = disObj;
          mouseDown(e);
        }, false);
      }
    });
  }

  function mouseUp() {
    objMoving.elem.style.zIndex = "";
    window.removeEventListener('mousemove', elMove, true);
  }

  var mXo, mYo;
  function mouseDown(e) {
    window.addEventListener('mousemove', elMove, true);
    window.addEventListener('mouseup', mouseUp, false);
    mXo = e.offsetX;
    mYo = e.offsetY;
    objMoving.elem.style.zIndex = "100";

    // Only relevant if hover effect needed, but an additional
    // hover class is required - see the below link for more info
    // https://github.com/niklasvh/html2canvas/issues/683#issuecomment-316503359
    // getScreenshot(objMoving);
  } 

  function elMove(e) {
    objMoving.elem.style.margin = 0;
    objMoving.elem.style.top = 0;
    objMoving.elem.style.left = 0;
    objMoving.elem.style.position = 'absolute';
    var coords = getRelativeCoordinates(e);
    objMoving.elem.style.transform = "translate(" + (coords.x - mXo) + "px, " + (coords.y - mYo) + "px)";
  }

  // From https://stackoverflow.com/a/36860652/2065702 then modified
  function getRelativeCoordinates (e) {
      var pos = {}, offset = {}, ref;
      ref = objMoving.container.offsetParent;

      pos.x = !! e.touches ? e.touches[ 0 ].pageX : e.pageX;
      pos.y = !! e.touches ? e.touches[ 0 ].pageY : e.pageY;

      offset.left = objMoving.container.offsetLeft;
      offset.top = objMoving.container.offsetTop;

      while (ref) {
          offset.left += ref.offsetLeft;
          offset.top += ref.offsetTop;

          ref = ref.offsetParent;
      }

      return { 
          x : pos.x - offset.left,
          y : pos.y - offset.top,
      }; 
  }
}
</script>
</body>
</html>